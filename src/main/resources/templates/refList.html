<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Reference Collector</title>
    <link th:href="@{webjars/bootstrap/4.3.1/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{webjars/font-awesome/5.8.1/css/all.css}" rel="stylesheet">
    <link th:href="@{style/header.css}" rel="stylesheet">
</head>

<body>
<header th:insert="fragments/general.html :: header"> </header>

<table class="table table-striped">
    <thead>
    <th hidden=""><a th:href="@{/references(size=${page.size}, orderBy='id', direction=${direction == 'ASC' ? 'DESC' : 'ASC'})}">ID</a>
    </th>
    <th class="col-md-3">
        <form method="GET" th:action="@{/references}" class="form-inline">
            <a th:href="@{/references(size=${page.size}, orderBy='name', direction=${direction == 'ASC' ? 'DESC' : 'ASC'})}">Name</a>
            <input type="hidden" name="filterBy" value="name">
            <input type="text" id="filterUrl" name="filter" class="form-control mx-sm-3"/>

            <button type="submit" class="btn btn-primary fas fa-search"></button>
        </form>
    </th>
    <th class="col-md-6">
        <form method="GET" th:action="@{/references}" class="form-inline">
            <a th:href="@{/references(size=${page.size}, orderBy='url', direction=${direction == 'ASC' ? 'DESC' : 'ASC'})}">URL</a>
            <input type="hidden" name="filterBy" value="url">
            <input type="text" id="filterName" name="filter" class="form-control mx-sm-3"/>

            <button type="submit" class="btn btn-primary fas fa-search"></button>
        </form>
    </th>
    <th>
        <a th:href="@{/references(size=${page.size}, orderBy='type', direction=${direction == 'ASC' ? 'DESC' : 'ASC'})}">Type</a>
    </th>
    <th class="col-md-3">
        <form method="GET" th:action="@{/references}" class="form-inline">

            <label for="filter">Labels</label>
            <!--<input type="hidden" name="size" th:text="${page.size}">-->
            <input type="hidden" name="filterBy" value="labels">
            <input type="text" id="filter" name="filter" class="form-control mx-sm-3"/>

            <button type="submit" class="btn btn-primary fas fa-search"></button>
        </form>
    </th>
    <th>Actions</th>
    </thead>
    <th:block th:each="ref : ${page.iterator()}">
        <tr>
            <td hidden="" th:text="${ref.id}">...</td>
            <td th:text="${ref.name}">...</td>
            <td th:text="${ref.url}">...</td>
            <td th:text="${ref.type}">...</td>
            <td><span class="badge" th:each="label : ${ref.labels}" th:text="${label.name }"> </span></td>
            <td><a th:href="@{/references/edit(id=${ref.id})}"><i class="far fa-edit"></i></a>
                <a th:href="@{/references/delete(id=${ref.id})}"><i class="far fa-trash-alt"></i></a></td>

        </tr>
    </th:block>
</table>
<nav aria-label="Page navigation">
    <ul class="pagination">
        <li class="page-item" th:classappend="${page.number == 0} ? disabled">
            <a class="page-link" th:href="@{/references(size=${page.size}, page=${page.number-1}, filter=${filter}, filterBy=${filterBy}, orderBy=${orderBy}, direction=${direction})}"
               aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
            </a>
        </li>
        <li th:each="pageNumber : ${pageNumbers}" class="page-item"
            th:classappend="${pageNumber==page.number + 1} ? active">
            <a class="page-link" th:href="@{/references(size=${page.size}, page=${pageNumber-1}, filter=${filter}, filterBy=${filterBy}, orderBy=${orderBy}, direction=${direction})}"
               th:text=${pageNumber}>
            </a>
        </li>
        <li class="page-item" th:classappend="${page.totalPages == page.number +1} ? disabled">
            <a class="page-link" th:href="@{/references(size=${page.size}, page=${page.number+1}, filter=${filter}, filterBy=${filterBy}, orderBy=${orderBy}, direction=${direction})}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </li>
    </ul>
</nav>
<!--<div th:if="${page.totalPages >= 0}" class="pagination"-->
<!--th:each="pageNumber : ${pageNumbers}">-->
<!--<a th:href="@{/references(size=${page.size}, page=${pageNumber})}"-->
<!--th:text=${pageNumber}-->
<!--th:class="${pageNumber==page.number + 1} ? active"></a>-->
<!--</div>-->
<br/>
<a class="btn btn-primary" th:href="@{/references/new}" id="create">New reference</a>

<script th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<!--<script th:src="@{webjars/font-awesome/5.8.1/js/fontawesome.min.js}"></script>-->

</body>
</html>
